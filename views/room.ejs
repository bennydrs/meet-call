<%- include('./partials/header.ejs') %>

  <div class="main">
    <div class="main__left">
      <nav class="navbar">
        <h3>Meet Call</h3>
        <i class="fas fa-comment-dots message_icon"></i>
      </nav>
      <div class="subheader">
        <div class="code_meet">
          <span id="code_meet"><%= roomId %></span>
          <button id="copy"><i class="fas fa-copy"></i></button>
        </div>
      </div>
      <div class="main__videos">
        <div class="video-grid" id="video-grid"></div>
      </div>
      <div class="main__controls">
        <div class="main__controls__block">
          <div onClick="muteUnmute()" class="main__controls_button main__mute_button">
            <i class="fas fa-microphone"></i>
          </div>
          <div onClick="playStop()" class="main__controls_button main__video_button">
            <i class="fas fa-video"></i>
          </div>
          <div class="main__controls_button">
            <a href="/">
              <i class="fas fa-sign-out-alt leave"></i>
            </a>
          </div>
        </div>
      </div>
    </div>
    <div class="main__right show">
      <div class="main__header">
        <h5>Chat</h5>
        <i class="fas fa-times close"></i>
      </div>
      <div class="main__chat_window">
        <div class="messages"></div>
      </div>
      <div class="main__message_container">
        <input type="text" id="chat_message" placeholder="Type message here...">
        <i class="fab fa-telegram-plane send_message"></i>
      </div>
    </div>
  </div>

  <script>
    const ROOM_ID = "<%= roomId %>"
    const uid = "<%= query.uid %>"
    const username = "<%= query.name %>"
  </script>
  <script src="https://unpkg.com/peerjs@1.3.1/dist/peerjs.min.js"></script>
  <script src="/socket.io/socket.io.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.slim.min.js" integrity="sha256-u7e5khyithlIdTpu22PHhENmPcRdFiHRjhAuHcs05RI=" crossorigin="anonymous"></script>
  <script src="script.js"></script>

<%- include('./partials/footer.ejs') %>